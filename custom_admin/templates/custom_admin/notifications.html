{% extends 'custom_admin/base_admin_custom.html' %}
{% block title %}System Notifications{% endblock %}
{% block page_title %}Alerts & Notifications{% endblock %}
{% block extra_head %}
<style>
    .notification-card {
        padding: 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: white;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(75, 46, 30, 0.04);
        margin-bottom: 5px;
        transition: all 0.2s ease;
    }
    .notification-unread {
        border-left: 4px solid #3498db;
        background: #fcfdfd;
    }
    .notification-read {
        border-left: 4px solid #eee;
        background: white;
    }
</style>
{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 35px;">
    <h2 style="font-size: 24px; font-weight: 700;">System Alerts</h2>
    {% if notifications %}
    <a href="{% url 'admin-custom:notifications-read-all' %}" class="btn-unified" style="background: #f8f9fa; color: var(--text-main); border: 1px solid #ddd;"><i class="fas fa-check-double"></i> Mark All Read</a>
    {% endif %}
</div>

<div style="display: flex; flex-direction: column; gap: 15px;">
    {% for n in notifications %}
    <div class="notification-card {% if n.is_read %}notification-read{% else %}notification-unread{% endif %}">
        <div style="flex: 1;">
            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                <span style="font-weight: 700; font-size: 14px; color: var(--text-main);">{{ n.user.get_full_name|default:n.user.username }}</span>
                {% if not n.is_read %}
                    <span style="width: 8px; height: 8px; background: #3498db; border-radius: 50%;"></span>
                {% endif %}
            </div>
            <div style="font-size: 14px; color: var(--text-main); font-weight: 500;">{{ n.message }}</div>
            <div style="font-size: 11px; color: var(--text-muted); margin-top: 10px;"><i class="far fa-clock"></i> {{ n.created_at|date:"M d, Y H:i" }}</div>
        </div>
        <div style="margin-left: 20px;">
            {% if not n.is_read %}
                <a href="{% url 'admin-custom:notifications-read' n.pk %}" class="badge" style="background: #eaf2f8; color: #3498db; text-decoration: none; padding: 8px 12px;">MARK AS READ</a>
            {% else %}
                <span class="badge" style="background: #f8f9fa; color: #bbb;">READ</span>
            {% endif %}
        </div>
    </div>
    {% empty %}
    <div style="text-align: center; padding: 80px; background: white; border-radius: 12px; border: 1px dashed #ddd;">
        <div style="font-size: 40px; color: #eee; margin-bottom: 20px;"><i class="fas fa-bell-slash"></i></div>
        <div style="font-weight: 700; color: var(--text-muted);">No notifications at the moment.</div>
    </div>
    {% endfor %}
</div>

{% endblock %}
