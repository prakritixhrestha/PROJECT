{% extends 'custom_admin/base_admin_custom.html' %}
{% block title %}Order History{% endblock %}
{% block page_title %}Order Status Logs{% endblock %}
{% block content %}
<div class="data-card">
    <table>
        <thead><tr><th>Order ID</th><th>Previous Status</th><th>New Status</th><th>Changed By</th><th>Timestamp</th></tr></thead>
        <tbody>
            {% for entry in history %}
            <tr>
                <td><span style="font-weight: 700; color: var(--text-main);">#{{ entry.order.id }}</span></td>
                <td><span style="color: var(--text-muted);">{{ entry.old_status }}</span></td>
                <td>
                    <span class="badge" style="
                    {% if entry.new_status == 'Delivered' %}background: #e8f5e9; color: #2e7d32;
                    {% elif entry.new_status == 'Pending' or entry.new_status == 'Processing' %}background: #fff8e1; color: #f57f17;
                    {% else %}background: #f1f3f4; color: #5f6368;{% endif %}">
                        {{ entry.new_status|upper }}
                    </span>
                </td>
                <td style="font-weight: 600; color: var(--text-main);">{{ entry.changed_by.username }}</td>
                <td style="color: var(--text-muted); font-size: 13px;">{{ entry.changed_at|date:"M d, H:i" }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
